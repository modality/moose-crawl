{"mappings":"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","sources":["src/logic.js"],"sourcesContent":["(function() {\n/**\n * Logic Variable\n */\nclass LVar {\n  constructor(id) {\n    this.id = id\n  }\n\n  toString() {\n    return this.id\n  }\n}\n\nlet lvarCounter = 0 // global counter\nfunction lvar(id) {\n  if (!id) {\n    id = `~.${lvarCounter}`\n    lvarCounter += 1\n  }\n  return new LVar(id)\n}\n\nclass ImmutableMap {\n  constructor(data = []) {\n    this.data = data // [[key, val]]\n  }\n\n  set(key, val) {\n    let find = false,\n        data = []\n    for (let i = 0; i < this.data.length; i++) {\n      const pair = this.data[i]\n      if (key !== pair[0]) {\n        data.push(pair)\n      }\n    }\n    data.push([key, val])\n    return new ImmutableMap(data)\n  }\n\n  get(key) {\n    for (let i = 0; i < this.data.length; i++) {\n      const pair = this.data[i]\n      if (key === pair[0]) return pair[1]\n    }\n    return undefined\n  }\n\n  toMap() {\n    return new Map(this.data)\n  }\n\n  pprint() {\n    console.log(this.toMap())\n  }\n\n  toString() {\n    return this.toMap().toString()\n  }\n}\n\n/*\nclass Domain {\n  constructor(min, max) {\n    this.min = min\n    this.max = max\n  }\n\n  equal(v) {\n    if (isDomain(v)) {\n      return this.min === v.min && this.max === v.max\n    } else if (typeof(v) === 'number') {\n      return v >= this.min && v <= this.max\n    } else {\n      return v === this\n    }\n  }\n\n  toNumber() {\n    if (this.min === this.max)\n      return this.min\n    else\n      return this\n  }\n}\nconst REAL_DOMAIN = new Domain(-Infinity, Infinity)\n\nfunction isDomain(x) {\n  return x && x.constructor === Domain\n}\n*/\n\nfunction isLVar(x) {\n  return x && x.constructor === LVar\n}\n\nfunction isArray(x) {\n  return x && x.constructor === Array\n}\n\nfunction pprint(x) {\n  if (x && x.constructor === ImmutableMap) {\n    x.pprint()\n  } else {\n    console.log(x)\n  }\n}\n\nconst dot = function(){}\n\n/**\n * Walk\n * x, {x=>12}        => 12\n * x, {x=>y}         => y\n * x, {x=>y, y=>13}  => 13\n * x, {y=>12}        => x\n */\nfunction walk(key, sMap) {\n  if (isLVar(key)) {\n    const val = sMap.get(key)\n    if (val === undefined) return key // not found\n    return walk(val, sMap) // continue\n  } else {\n    return key\n  }\n}\n\nfunction deepwalk(key, sMap) {\n  const val = walk(key, sMap)\n  if (isArray(val)) {\n    // return val.map((x) => deepwalk(x, sMap))\n    let o = []\n    for (let i = 0; i < val.length; i++) {\n      const x = val[i]\n      if (x === dot) {\n        const rest = deepwalk(val[i+1], sMap)\n        o = o.concat(rest)\n        break\n      } else {\n        o.push(deepwalk(x, sMap))\n      }\n    }\n    return o\n  } else {\n    return val\n  }\n}\n\n/**\n * Unify\n *\n * @params: x, y, sMap\n * @goal: make x and y equal in sMap\n *\n * x, 12, {} => {x=>12}\n * x, y, {} => {x=>y}\n * x, m, {x=>12, m=>n} => {x=>12, m=>n, n=>x}\n */\nfunction unify(x, y, sMap) {\n  x = walk(x, sMap)\n  y = walk(y, sMap)\n  const xIsLVar = isLVar(x),\n        yIsLVar = isLVar(y)\n\n  if (x === y) {\n    return sMap\n  } else if (xIsLVar) {\n    return sMap.set(x, y)\n  } else if (yIsLVar) {\n    return sMap.set(y, x)\n  } else if (isArray(x) && isArray(y)) {\n    return unifyArray(x, y, sMap)\n  } else { // failed to unify\n    return null\n  }\n}\n\n// x and y are arrays\nfunction unifyArray(x, y, sMap) {\n  if (!x.length && !y.length) return sMap\n  if (x[0] === dot) {\n    return unify(x[1], y, sMap)\n  } else if (y[0] === dot) {\n    return unify(y[1], x, sMap)\n  } else if ((x.length && !y.length) ||\n             (!x.length && y.length)) {\n    return null\n  }\n\n  const s = unify(x[0], y[0], sMap)\n  return s && unify(x.slice(1), y.slice(1), s)\n}\n\nfunction succeed() {\n  return function*(sMap) {\n    yield sMap\n  }\n}\n\nfunction fail() {\n  return function*(sMap) {\n    yield null\n  }\n}\n\n/**\n * and\n */\nfunction and(...clauses) {\n  return function*(sMap) {\n    function* helper(offset, sMap) {\n      if (offset === clauses.length) return\n\n      let clause = clauses[offset]\n      if (clause.constructor.name !== 'GeneratorFunction') {\n        clause = clause()\n      }\n\n      let gen = clause(sMap)\n      while (true) {\n        let res = gen.next(),\n            sMap = res.value\n        if (res.done) break\n        if (sMap) {\n          if (offset === clauses.length - 1) {\n            yield sMap\n          } else {\n            yield* helper(offset + 1, sMap)\n          }\n        } else {     // error\n          yield null // failed\n        }\n      }\n    }\n\n   yield* helper(0, sMap)\n  }\n}\n\n/**\n * or\n */\nfunction or(...clauses) {\n  let count = false,\n      startOffst = 0\n      solNum = 0\n  if (typeof(clauses[0]) === 'number') {\n    count = clauses[0]\n    startOffst = 1\n  }\n  return function*(sMap) {\n    function* helper(offset, sMap, solNum) {\n      if (offset === clauses.length) return\n\n      let clause = clauses[offset]\n      if (clause.constructor.name !== 'GeneratorFunction') {\n        clause = clause()\n      }\n\n      const gen = clause(sMap)\n      while (true) {\n        const res = gen.next(),\n              sMap = res.value\n        if (res.done) break\n        if (sMap) {\n          yield sMap\n          solNum++\n          if (count && solNum >= count) return\n        }\n      }\n\n      yield* helper(offset + 1, sMap, solNum)\n    }\n\n    yield* helper(startOffst, sMap, solNum)\n  }\n}\n\n/**\n * eq\n */\nfunction eq(x, y) {\n  return function*(sMap) {\n    yield unify(x, y, sMap)\n  }\n}\n\n/**\n * run\n */\nfunction run(num, vars, goal) {\n  lvarCounter = 0 // reset counter\n  if (arguments.length === 2) {\n    goal = vars\n    vars = num\n    num = -1 // get all possible results\n  }\n\n  if (goal.constructor.name !== 'GeneratorFunction') {\n    goal = goal()\n  }\n\n  if (!(vars instanceof Array)) {\n    vars = [vars]\n  }\n\n  const results = []\n  let sMap = new ImmutableMap(),\n        gen = goal(sMap)\n\n  while (num) {\n    const res = gen.next(),\n          sMap = res.value\n    if (res.done) break\n    if (sMap) {\n      num--\n      const r = {} // new Map()\n      vars.forEach((v)=> {\n        r[v] = deepwalk(v, sMap)\n      })\n      results.push(r)\n    }\n  }\n  // console.log(sMap)\n  return results\n}\n\nfunction conso(first, rest, out) {\n  if (isLVar(rest)) {\n    return eq([first, dot, rest], out)\n  } else {\n    return eq([first, ...rest], out)\n  }\n}\n\nfunction firsto(first, out) {\n  return function(rest=lvar()) {\n    return conso(first, rest, out)\n  }\n}\n\nfunction resto(rest, out) {\n  return function(first=lvar()) {\n    return conso(first, rest, out)\n  }\n}\n\nfunction emptyo(x) {\n  return eq(x, [])\n}\n\nfunction membero(x, arr) {\n  return or(\n    (first=lvar())=> and(\n      firsto(first, arr),\n      eq(first, x)\n    ),\n    (rest=lvar()) => and(\n      resto(rest, arr),\n      membero(x, rest)\n    )\n  )\n}\n\nfunction appendo(seq1, seq2, out) {\n  return or(\n    and(emptyo(seq1), eq(seq2, out)),\n    (first=lvar(), rest=lvar(), rec=lvar())=> and(\n          conso(first, rest, seq1),\n          conso(first, rec, out),\n          appendo(rest, seq2, rec)))\n}\n\n/*\n  Constraints has to be sequential\n */\n// a + b = c\nfunction add(a, b, c) {\n  return function*(sMap) {\n    let numOfLVars = 0,\n        lvar_ = null\n\n    a = walk(a, sMap)\n    b = walk(b, sMap)\n    c = walk(c, sMap)\n\n    const aIsLVar = isLVar(a),\n          bIsLVar = isLVar(b),\n          cIsLVar = isLVar(c)\n\n    if (aIsLVar) { lvar_ = a; numOfLVars++ }\n    if (bIsLVar) { lvar_ = b; numOfLVars++ }\n    if (cIsLVar) { lvar_ = c; numOfLVars++ }\n\n    if (numOfLVars === 0) {\n      if (a + b === c) yield sMap\n      else yield null\n    } else if (numOfLVars === 1) {\n      if (lvar_ === a) {\n        if (typeof(c) === 'number' && typeof(b) === 'number')\n          yield* eq(a, c - b)(sMap)\n        else\n          yield null\n      } else if (lvar_ === b) {\n        if (typeof(c) === 'number' && typeof(a) === 'number' )\n          yield* eq(b, c - a)(sMap)\n        else\n          yield null\n      } else { // c\n        if (typeof(a) === 'number' && typeof(b) === 'number')\n          yield* eq(c, a + b)(sMap)\n        else\n          yield null\n      }\n    } else {\n      yield null\n    }\n  }\n}\n\n// a - b = c\nfunction sub(a, b, c) {\n  return add(b, c, a)\n}\n\n// a * b = c\nfunction mul(a, b, c) {\n  return function*(sMap) {\n    let numOfLVars = 0,\n        lvar_ = null\n\n    a = walk(a, sMap)\n    b = walk(b, sMap)\n    c = walk(c, sMap)\n\n    if (isLVar(a)) { lvar_ = a; numOfLVars++ }\n    if (isLVar(b)) { lvar_ = b; numOfLVars++ }\n    if (isLVar(c)) { lvar_ = c; numOfLVars++ }\n\n    if (numOfLVars === 0) {\n      if (a * b === c) yield sMap\n      else yield null\n    } else if (numOfLVars === 1) {\n      if (lvar_ === a) {\n        if (typeof(c) === 'number' && typeof(b) === 'number')\n          yield* eq(a, c / b)(sMap)\n        else\n          yield null\n      } else if (lvar_ === b) {\n        if (typeof(c) === 'number' && typeof(a) === 'number' )\n          yield* eq(b, c / a)(sMap)\n        else\n          yield null\n      } else { // c\n        if (typeof(a) === 'number' && typeof(b) === 'number')\n          yield* eq(c, a * b)(sMap)\n        else\n          yield null\n      }\n    } else {\n      yield null\n    }\n  }\n}\n\n// a / b = c\nfunction div(a, b, c) {\n  return mul(b, c, a)\n}\n\nfunction lt(x, y) {\n  return function*(sMap) {\n    x = walk(x, sMap)\n    y = walk(y, sMap)\n    if (typeof(x) === 'number' && typeof(y) === 'number' && x < y) yield sMap\n    yield null\n  }\n}\n\nfunction le(x, y) {\n  return function*(sMap) {\n    x = walk(x, sMap)\n    y = walk(y, sMap)\n    if (typeof(x) === 'number' && typeof(y) === 'number' && x <= y) yield sMap\n    yield null\n  }\n}\n\nfunction gt(x, y) {\n  return lt(y, x)\n}\n\nfunction ge(x, y) {\n  return le(y, x)\n}\n\nfunction stringo(x) {\n  return function*(sMap) {\n    const val = walk(x, sMap)\n    if (typeof(val) === 'string') yield sMap\n    yield null // not of type string\n  }\n}\n\nfunction numbero(x) {\n  return function*(sMap) {\n    const val = walk(x, sMap)\n    if (typeof(val) === 'number') yield sMap\n    yield null // not of type number\n  }\n}\n\nfunction arrayo(x) {\n  return function*(sMap) {\n    const val = walk(x, sMap)\n    if (isArray(val)) yield sMap\n    yield null // not of type array\n  }\n}\n\n/**\n * fact\n */\nfunction facts(...facs) {\n return function(...args) {\n   return or.apply(null,\n                   facs.map(fac => and.apply(null,\n                                              fac.map((facArg, i)=> eq(facArg, args[i])))))\n                                            }\n}\n\nfunction anyo(goal) {\n  return or(goal, ()=> anyo(goal))\n}\n\nwindow.logic = { lvar, run, and, or, eq, facts,\n                conso, firsto, resto, emptyo, membero, appendo,\n                numbero, stringo, arrayo,\n                add, sub, mul, div,\n                lt, le, gt, ge,\n                succeed, fail,\n                anyo };\n\n}())\n"],"names":[],"version":3,"file":"index.29e09695.js.map"}